http:
  routers:
    frontend-router-http:
      rule: "Host(`pourymovie.ir`)"
      entryPoints:
        - web
      service: frontend-service

    frontend-router:
      rule: "Host(`pourymovie.ir`)"
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt
      service: frontend-service

    backend-router-http:
      rule: "Host(`api.pourymovie.ir`)"
      entryPoints:
        - web
      middlewares:
        - redirect-to-https
      service: backend-service

    backend-router:
      rule: "Host(`api.pourymovie.ir`)"
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt
      service: backend-service

    portainer-router-http:
      rule: "Host(`portainer.pourymovie.ir`)"
      entryPoints:
        - web
      middlewares:
        - redirect-to-https
      service: portainer-service

    portainer-router:
      rule: "Host(`portainer.pourymovie.ir`)"
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt
      service: portainer-service

    minio-router-http:
      rule: "Host(`minio.pourymovie.ir`)"
      entryPoints:
        - web
      middlewares:
        - redirect-to-https
      service: minio-service

    minio-router:
      rule: "Host(`minio.pourymovie.ir`)"
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt
      service: minio-service

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true

  services:
    backend-service:
      loadBalancer:
        servers:
          - url: "http://backend:1406"

    frontend-service:
      loadBalancer:
        servers:
          - url: "http://frontend:3000"

    portainer-service:
      loadBalancer:
        servers:
          - url: "http://portainer:9000"

    minio-service:
      loadBalancer:
        servers:
          - url: "http://minioProd:9001"
